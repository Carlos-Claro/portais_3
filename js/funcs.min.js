
var base_url="";var base=new String(document.baseURI);var n=base.indexOf("localhost");var n2=base.indexOf("192.168");var n3=base.indexOf("201.16");var LOCALHOST=false;if((n)>=0||(n2)>=0||(n3)>=0){LOCALHOST=true}var URL_HTTP=base_url;var URI=base_url;var URL_ADMIN=base_url;base_url=$("body").attr("data_url");$(function(){filtro.inicia();var a=$(".localidade_select").select2({tags:false,placeholder:"Busque uma cidade, bairro, nome da rua que busca seu imÃ³vel ",amdLanguageBase:"js/i18n/",language:"pt-BR.js",closeOnSelect:true,ajax:{url:function(d){var c=$(".localizacao").attr("data-cidade");if(c!=""){var b=($(".localizacao").attr("data-bairro")!="")?1:0;return URI+"funcoes/set_bairros_por_cidade_select2/"+c+"/"+b+""+(d.term=="undefined"?d.term:"")}else{return URI+"cidades/busca_cidade_json/"+(d.term!==undefined?d.term:"")}},dataType:"json",delay:50,processResults:function(b){return{results:b,}}},});a.on("select2:select",function(l){var d=$(".localizacao").attr("data-cidade");if(d!=""){var s=l.params.data.text;var f=l.params.data.id;if(s.indexOf("*")>=0){$('option[value="'+f+'"]').remove();var u=s.split("*");var o=[];var g=f.indexOf(",")>=0?f.split(","):[f];var r=u[1].indexOf(",")>=0?u[1].split(","):[u[1]];$.each(g,function(c,b){console.log(b);if(b!=""){$(".localizacao_campo").append('<option value="'+b+'">'+r[c]+"</option>");o.push(b)}});var d=$(".localizacao").attr("data-cidade");o.push(d);var k=$(".localizacao").attr("data-bairro");if(k!=""){if(k.indexOf(",")>=0){var v=k.split(",");$.each(v,function(c,b){o.push(b)})}else{o.push(k)}}a.val(o).trigger("change");filtro.set_bairro(l.params.data.id,true)}else{filtro.set_bairro(l.params.data.id,true)}}else{var h=l.params.data.id;if(h.indexOf(";")>0){var q=h.split(";");var j=l.params.data.text;var u=j.split("*");var m=u[2].split(",");$(".localizacao").attr("data-cidade",q[0]);$(".localizacao_campo").html("");$(".localizacao_campo").append('<option value="'+q[0]+'">'+u[1]+"</option>");filtro.set_bairro(q[1],true);var o=[];o.push(q[0]);var p=q[1].split(",");$.each(p,function(c,b){if(b!=""){$(".localizacao_campo").append('<option value="'+b+'">'+m[c]+"</option>");o.push(b)}});a.val(o).trigger("change")}else{$(".localizacao").attr("data-cidade",l.params.data.id)}}filtro.submit()});a.on("select2:unselect",function(c){var b=$(".localizacao").attr("data-bairro");var d=$(".localizacao").attr("data-cidade");if(d==c.params.data.id){$(".localizacao").attr("data-bairro","");if($(".id_empresa").val()===undefined){filtro.submit()}a.val(null).trigger("change");$(".localizacao").attr("data-cidade","")}else{if(b!=""){filtro.set_bairro(c.params.data.id,false);filtro.submit()}else{$(".localizacao").attr("data-cidade","")}}})});var pesquisa={inicia:function(){var a=$(".main").data("uri");console.log(a)},setBusca:function(){},};var filtro={inicia:function(){var b=$(".data-valores").html();var a=JSON.parse(b);console.log(a)},set_elemento:function(a){},setElementos:function(){var a={};$.each(filtro.elementos,function(c,b){switch(b.tipo){case"attr":a[c]=$("#"+c).attr("data-valor");break;case"attr_local":a[c]=$(".localizacao").attr("data-"+c);break;case"val":a[c]=$("#"+c).val();break;case"check":a[c]=$("."+c+":checked").length;break;case"url":a[c]=$("."+c+"").attr("data-item");break;case"range":var d=[];$(" ."+c+":checked").each(function(f,e){d.push($(e).val())});a[c]=d;break}});return a},elementos:{id_empresa:{url:false,tipo:"val"},tipo_negocio:{url:true,tipo:"attr"},tipo:{url:true,tipo:"attr",campo_selecionado:"tipo_selecionado"},cidade:{url:true,tipo:"attr_local",campo_selecionado:"localidade_selecionado.bairro"},bairro:{url:true,tipo:"attr_local",campo_selecionado:"localidade_selecionado.cidade"},valor_min:{url:false,tipo:"val"},valor_max:{url:false,tipo:"val"},area_min:{url:false,tipo:"val"},area_max:{url:false,tipo:"val"},residencial:{url:false,tipo:"check"},comercial:{url:false,tipo:"check"},quartos:{url:true,tipo:"range"},banheiros:{url:false,tipo:"range"},vagas:{url:false,tipo:"range"}}};